<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>404 - We're Cooked | Lyko Lake</title>
<style>/* same huge block as original â€“ unchanged */</style>
</head>
<body>
<!-- visual overlays identical -->
<div class="loading-overlay" id="loadingOverlay"><div class="loading-spinner"></div><div class="loading-text">Loading Profile...</div></div>
<div class="glitch-overlay"></div><div class="static"></div>
<div class="wave">ğŸŒŠ</div><div class="wave">ğŸŒŠ</div><div class="wave">ğŸŒŠ</div>

<div class="container" id="errorContainer">
  <div class="error-code">404</div>
  <h1 class="main-text">Yo, We're Cooked ğŸ’€</h1>
  <p class="sub-text">The homies are fw it rn tho<br>we straight chillin âœ¨</p>
  <div class="emoji-group"><span class="emoji">ğŸŒŠ</span><span class="emoji">ğŸ˜</span><span class="emoji">ğŸ”¥</span></div>
  <div class="vibe-check"><p class="vibe-text"><strong>Real talk:</strong> This page doesn't exist. But don't trip, the lake's still vibing. Either you typed something wrong or we haven't built this part of the site yet. No cap, we're working on it fr fr. ğŸ™</p></div>
  <div class="buttons"><a href="/" class="button">Take Me Home ğŸ </a><a href="/auth.html" class="button secondary">Sign Up / Login âœ¨</a></div>
</div>

<script type="module">
import {initializeApp} from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
import {getFirestore,doc,getDoc} from 'https://www.gstatic.com/firebase-firestore.js';

const firebaseConfig={/* same */};
const app=initializeApp(firebaseConfig);
const db=getFirestore(app);

/* ----------  BAN CHECK  ---------- */
const banSnap=await getDoc(doc(db,'bans',localStorage.getItem('uid')||''));
if(banSnap.exists()){
  const {until,reason}=banSnap.data();
  if(!until||until.toMillis()>Date.now()){
    document.body.innerHTML=`
      <div style="text-align:center;padding:10vh 20px;font-family:sans-serif">
        <h1>ğŸš« Banned</h1>
        <p style="margin:20px 0">Sorry, you are banned.</p>
        <p><strong>Reason:</strong> ${reason}</p>
        ${until?`<p><strong>Until:</strong> ${until.toDate().toLocaleString()}</p>`:'<p>This ban is permanent.</p>'}
        <a href="/" style="color:#22c5a4">Back to home</a>
      </div>`;
    throw new Error('Banned');
  }
}

/* ----------  ORIGINAL 404 LOGIC  ---------- */
const loadingOverlay=document.getElementById('loadingOverlay');
const errorContainer=document.getElementById('errorContainer');
async function checkForProfile(){
  const path=window.location.pathname.split('/').filter(p=>p)[0];
  if(path&&!path.includes('.')){
    try{
      const usernameDoc=await getDoc(doc(db,'usernames',path.toLowerCase()));
      if(usernameDoc.exists()) location.href=`/profile.html?u=${path}`;
      else showError();
    }catch{showError();}
  }else{showError();}
}
function showError(){loadingOverlay.classList.add('hidden');errorContainer.style.display='block';}
checkForProfile();
</script>
</body>
</html>
